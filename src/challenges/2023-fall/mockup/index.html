<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Seabed Security</title>
    <style>
      body {
        background: black;
        margin: 0;
      }
    </style>
  </head>
  <body>
    <canvas width="800" height="800"></canvas>
    <script>
      const TILE_SIZE = 7;
      const WIDTH = 100;
      const HEIGHT = 100;

      const grid = Array(HEIGHT).fill(Array(WIDTH).fill(0));

      const canvas = document.querySelector("canvas");
      const ctx = canvas.getContext("2d");

      window.addEventListener("mousemove", drawLightRadius);

      draw();

      function draw() {
        ctx.fillStyle = "black";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        drawGrid();
        drawBiomeUpperLimits();
      }

      function drawLightRadius(e) {
        const { clientX, clientY } = e;
        const gridX = Math.floor(clientX / TILE_SIZE);
        const gridY = Math.floor(clientY / TILE_SIZE);

        if (0 > gridX || gridX > WIDTH - 1 || 0 > gridY || gridY > HEIGHT - 1)
          return;

        const { top, left, bottom, right } = getRectBounds(gridX, gridY);

        draw();

        ctx.fillStyle = "orange";
        ctx.beginPath();
        ctx.moveTo(left, top);
        ctx.lineTo(right, top);
        ctx.lineTo(right, bottom);
        ctx.lineTo(left, bottom);
        ctx.closePath();
        ctx.fill();

        ctx.strokeStyle = "orange";
        ctx.lineWidth = 0.2;
        ctx.beginPath();
        ctx.arc(
          left + TILE_SIZE / 2,
          top + TILE_SIZE / 2,
          20 * TILE_SIZE,
          0,
          Math.PI * 2
        );
        ctx.stroke();
      }

      function drawGrid() {
        for (let r = 0; r < HEIGHT; r++) {
          for (let c = 0; c < WIDTH; c++) {
            const { top, left, bottom, right } = getRectBounds(c, r);
            ctx.lineWidth = 0.1;
            ctx.strokeStyle = "#999";
            ctx.beginPath();
            ctx.moveTo(left, top);
            ctx.lineTo(right, top);
            ctx.lineTo(right, bottom);
            ctx.lineTo(left, bottom);
            ctx.closePath();
            ctx.stroke();
          }
        }
      }

      function drawBiomeUpperLimits() {
        const UPPER_LIMITS = [25, 50, 75];
        for (upper of UPPER_LIMITS) {
          ctx.lineWidth = 0.2;
          ctx.strokeStyle = "#99e";
          ctx.beginPath();
          ctx.moveTo(0, upper * TILE_SIZE);
          ctx.lineTo(WIDTH * TILE_SIZE, upper * TILE_SIZE);
          ctx.closePath();
          ctx.stroke();
        }
      }

      function getRectBounds(x, y) {
        const top = y * TILE_SIZE;
        const bottom = top + TILE_SIZE;
        const left = x * TILE_SIZE;
        const right = left + TILE_SIZE;
        return { top, left, bottom, right };
      }
    </script>
  </body>
</html>
